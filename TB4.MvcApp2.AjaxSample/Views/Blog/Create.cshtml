@{
    ViewData["Title"] = "Create Blog Post";
}

<h3>New Blog</h3>

<div class="mb-3">
    <label for="blogTitle" class="form-label">Blog Title</label>
    <input type="text" class="form-control" id="blogTitle" name="BlogTitle" placeholder="Enter blog title">
</div>

<div class="mb-3">
    <label for="blogAuthor" class="form-label">Blog Author</label>
    <input type="text" class="form-control" id="blogAuthor" name="BlogAuthor" placeholder="Enter author name">
</div>

<div class="mb-3">
    <label for="blogContent" class="form-label">Blog Content</label>
    <textarea class="form-control" id="blogContent" rows="5" name="BlogContent" placeholder="Write your blog content here..."></textarea>
</div>

<a href="/Blog" class="btn btn-outline-dark">Back</a>
<button type="button" class="btn btn-success" id="btnSave">Save</button>

@section scripts {
    <script>
        $('#btnSave').click(function() {
            const title = $('#blogTitle').val();
            const author = $('#blogAuthor').val();
            const content = $('#blogContent').val();

            const blog = {
                BlogTitle : title,
                BlogAuthor : author,
                BlogContent : content
            }

            $.ajax({
                url: "/Blog/Save",
                data: { requestModel: blog},
                type: "POST",
                success: function (response) {
                    if(!response.IsSuccess){
                        alert(response.Message);
                        return;
                    }

                    alert(response.Message);
                    location.href = "/Blog";
                },
                error: function (xhr) {
                    console.error(xhr.responseText);
                }
            });
        });
    </script>
}